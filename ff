#!/bin/bash
#
# usage: ff <files>
#
# performs the given commands for every file in the current dir,
# or only the files specified as arguments
#
# user scripting vars:
# $f = current file
# $d = current directory
#
# @author	Suraj Kurapati
# @version	$Revision$, $Date$
#

# globals
	g_tmpfileMask="/tmp/$$"
	g_script="${g_tmpfileMask}.script"
	g_args=$@

# check for args
	if [ $# -eq 0 ] ; then
		#g_args=`ls | sed -e 's/^/"/g' -e 's/$/"/g' | tr '\n' ' '`
		g_args=*
	fi

# get user commands
	g_input=`cat`
	
	if [ "$g_input" == "" ] ; then
		g_input='break'
	fi
	
# write custom script file
cat > "$g_script" << __CUSTOM_SCRIPT__
#!/bin/bash
	
	# set path of current directory
	d="\$PWD"

	# loop though all files in specified dir
	for f in $g_args
	do
		# execute user specified commands
		$g_input
	done

__CUSTOM_SCRIPT__

# run custom script
	chmod u+x "$g_script"
	"$g_script" $g_args
	
# cleanup
	rm -f ${g_tmpfileMask}*
	
